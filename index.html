<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Energy - SPA</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>üîã My Energy</h1>
    <nav id="topNav" class="hidden">
      <button id="navDashboard" class="nav-btn">Dashboard</button>
      <button id="navClients" class="nav-btn">Clientes</button>
      <button id="navUsers" class="nav-btn admin-only">Usu√°rios</button>
      <button id="navProfile" class="nav-btn">Perfil</button>
      <button id="logoutBtn" class="nav-btn">Sair</button>
    </nav>
  </header>

  <main>
    <!-- LOGIN -->
    <section id="view-login" class="view">
      <div class="card auth-card">
        <h2>Entrar</h2>
        <input id="loginEmail" type="email" placeholder="Email" />
        <input id="loginPassword" type="password" placeholder="Senha" />
        <button id="loginBtn" class="primary">Entrar</button>
        <div class="row">
          <button id="toRegister" class="link-btn">Criar conta</button>
          <button id="toForgot" class="link-btn">Esqueci a senha</button>
        </div>
        <div id="loginMsg" class="msg"></div>
      </div>
    </section>

    <!-- REGISTER -->
    <section id="view-register" class="view hidden">
      <div class="card auth-card">
        <h2>Cadastrar usu√°rio</h2>
        <input id="regName" type="text" placeholder="Nome" />
        <input id="regEmail" type="email" placeholder="Email" />
        <input id="regPassword" type="password" placeholder="Senha" />
        <select id="regRole">
          <option value="user">Usu√°rio</option>
          <option value="admin">Administrador</option>
        </select>
        <button id="registerBtn" class="primary">Cadastrar</button>
        <button id="backToLogin1" class="link-btn">Voltar</button>
        <div id="registerMsg" class="msg"></div>
      </div>
    </section>

    <!-- FORGOT -->
    <section id="view-forgot" class="view hidden">
      <div class="card auth-card">
        <h2>Recuperar senha</h2>
        <input id="forgotEmail" type="email" placeholder="Email cadastrado" />
        <button id="forgotBtn" class="primary">Gerar token</button>
        <p class="muted">O token ser√° mostrado aqui (simula√ß√£o local). Use para redefinir a senha.</p>
        <div id="forgotResult" class="token-area"></div>
        <button id="backToLogin2" class="link-btn">Voltar</button>
      </div>
    </section>

    <!-- RESET PASSWORD -->
    <section id="view-reset" class="view hidden">
      <div class="card auth-card">
        <h2>Redefinir senha</h2>
        <input id="resetEmail" type="email" placeholder="Email" />
        <input id="resetToken" type="text" placeholder="Token recebido" />
        <input id="resetPassword" type="password" placeholder="Nova senha" />
        <button id="resetBtn" class="primary">Redefinir</button>
        <button id="backToLogin3" class="link-btn">Voltar</button>
        <div id="resetMsg" class="msg"></div>
      </div>
    </section>

    <!-- DASHBOARD -->
    <section id="view-dashboard" class="view hidden">
      <div class="dashboard-grid">
        <div class="card">
          <h3>Resumo</h3>
          <p id="dashTotal">Consumo Total: 0 kWh</p>
          <p id="dashMedia">M√©dia: 0 kWh</p>
          <p id="dashMeta">Resid√™ncias: 0</p>
        </div>

        <div class="card">
          <h3>Selecionar Cliente / Resid√™ncia</h3>
          <select id="selectClient"></select>
          <select id="selectHouse"></select>
        </div>

        <div class="card">
          <h3>Adicionar Consumo</h3>
          <input id="inputKwh" type="number" placeholder="kWh" />
          <input id="inputDate" type="date" />
          <input id="inputNote" type="text" placeholder="Observa√ß√£o (opcional)" />
          <button id="addConsumptionBtn" class="primary">Adicionar</button>
        </div>

        <div class="card full">
          <h3>Gr√°fico de Consumo</h3>
          <canvas id="dashChart"></canvas>
        </div>

        <div class="card full">
          <h3>Lista de Consumos</h3>
          <div id="consumptionList" class="list"></div>
        </div>
      </div>
    </section>

    <!-- CLIENTS -->
    <section id="view-clients" class="view hidden">
      <div class="flex-row">
        <div class="card wide">
          <h3>Clientes</h3>
          <div class="form-inline">
            <input id="clientName" placeholder="Nome do cliente" />
            <input id="clientContact" placeholder="Contato" />
            <button id="addClientBtn" class="primary">Adicionar Cliente</button>
          </div>
          <div id="clientsList" class="list"></div>
        </div>

        <div class="card wide">
          <h3>Resid√™ncias do Cliente Selecionado</h3>
          <div id="housesTitle">Selecione um cliente</div>
          <div class="form-inline">
            <input id="houseLabel" placeholder="Apelido (ex: Casa 1)" />
            <input id="houseAddress" placeholder="Endere√ßo" />
            <button id="addHouseBtn" class="primary">Adicionar Resid√™ncia</button>
          </div>
          <div id="housesList" class="list"></div>
        </div>
      </div>
    </section>

    <!-- USERS (admin) -->
    <section id="view-users" class="view hidden">
      <div class="card wide">
        <h3>Gerenciar Usu√°rios (Admin)</h3>
        <div class="form-inline">
          <input id="userName" placeholder="Nome" />
          <input id="userEmail" placeholder="Email" />
          <select id="userRole">
            <option value="user">Usu√°rio</option>
            <option value="admin">Administrador</option>
          </select>
          <button id="addUserBtn" class="primary">Adicionar Usu√°rio</button>
        </div>
        <div id="usersList" class="list"></div>
      </div>
    </section>

    <!-- PROFILE -->
    <section id="view-profile" class="view hidden">
      <div class="card auth-card">
        <h2>Meu Perfil</h2>
        <input id="profileName" type="text" placeholder="Nome" />
        <input id="profileEmail" type="email" placeholder="Email" disabled />
        <input id="profilePassword" type="password" placeholder="Nova senha (opcional)" />
        <button id="saveProfileBtn" class="primary">Salvar</button>
        <div id="profileMsg" class="msg"></div>
      </div>
    </section>

    <!-- FOOTER / MSG -->
    <section id="view-msg" class="view hidden">
      <div class="card">
        <p id="generalMsg">Mensagem</p>
        <button id="msgBack" class="primary">Voltar</button>
      </div>
    </section>
  </main>

  <footer>
    <small>My Energy - Prot√≥tipo front-end ‚Ä¢ Dados locais (localStorage)</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
